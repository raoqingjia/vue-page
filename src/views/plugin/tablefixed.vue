<template>
  <div class="article inner">
    <div class="content">
      <div class="wrap">
        <h2 class="art-title" v-html="title"></h2>
        <p class="art-time">
          <span v-html="created"></span>
        </p>
        <div id="table_box" >
          <table id="table_scroll" class="list_table ">
            <thead>
            <tr>
              <th>增幅</th>
              <th>审计点</th>
              <th>指标值</th>
              <th>同比</th>
              <th>环比</th>
              <th>环比</th>
              <th>环比</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况01</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标4dsaf adsf dfsda465f 65sdaf sdaf dsa fsdaf作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            <tr>
              <td>
                &#8593
              </td>
              <td>
                <p>是否存在指标作假情况33333</p>
              </td>
              <td>475768.52</td>
              <td>
                <em>142.90%</em>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
              <td>
                <span>-42.90%</span>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="art-content">
          <h3>
           仅支持IE9及以上，在IE8下cloneNode()会报错；
          </h3>
          <pre>
先说下css样式
<p class="pre-cmd">#table_box{
  height: 433px;
  overflow: hidden;
  width: 100%;
}
.list_table{
  width:100%;
  border-spacing: 1;
  border-collapse: collapse;
  border:1px #ddd solid;
}
.list_table img{
  display: block;
  width: 50%;
  margin: 0 auto;
}
.list_table tr th,.list_table tr td{
  border:1px #ddd solid;
  text-align: center;
  background: #fff;
}
.list_table tr th{
  height: 23px;
  vertical-align: middle;
  background: #c3c3c3;
  color: #fff;
}
.list_table tr th:first-of-type{
  border-left: none;
}
.list_table tr th:last-of-type{
  border-right: none;
}
.list_table tr td{
  height: 36px;
  vertical-align: middle;
}
.list_table tr td.text-left{
  text-align: left;
}
.list_table tr td.text-right{
  text-align: right;
}
.list_table tr td:nth-child(1){
  width:40px;
}
.list_table tr td:nth-child(2){
  width:180px;
}
.list_table tr td:first-of-type{
  border-left: none;
}
.list_table tr td:last-of-type{
  border-right: none;
}
.list_table tr td:first-of-type img{
  padding: 0 5px;
}
.list_table tr td p{
  width: 175px;
  padding-left:5px;
  overflow:hidden;           /*  溢出隐藏 */
  text-overflow:ellipsis;    /* 文本溢出隐藏 */
  white-space:nowrap;     /* 文本不许换行 */
  margin:0;
}
.list_table tr td i{
  color: #0081d8;
  cursor: pointer;
}
.list_table tr td em{
  color: #17bb9c;
}
.list_table tr td span{
  color: #9559ad;
}</p>
html的结构
<p class="pre-cmd">
  &#60div id="table_box" >
    &#60table id="table_scroll" class="list_table ">
      &#60thead>
      &#60tr>
        &#60th>增幅&#60/th>
        &#60th>审计点&#60/th>
        &#60th>指标值&#60/th>
        &#60th>同比&#60/th>
        &#60th>环比&#60/th>
        &#60th>环比&#60/th>
        &#60th>环比&#60/th>
      &#60/tr>
      &#60/thead>
      &#60tbody>
        &#60tr>
          &#60td>增加&#60/td>
          &#60td>&#60p>是否存在指标作假情况&#60/p>&#60/td>
          &#60td>475768.52&#60/td>
          &#60td>&#60em>142.90%&#60/em>&#60/td>
          &#60td>&#60span>-42.90%&#60/span>&#60/td>
          &#60td>&#60span>-42.90%&#60/span>&#60/td>
          &#60td>&#60span>-42.90%&#60/span>&#60/td>
        &#60/tr>
            .....
      &#60/tbody>
    &#60/table>
  &#60/div>
</p>
js的结构
<p class="pre-cmd">
  //当所有数据返回成功之后，再执行下面的语句
  //美化滚动条
  $("#table_box").niceScroll({cursorcolor:'#d1d1d1',cursorwidth:'4',horizrailenabled: false});
  //固定表头
  fixed_table("table_scroll");

  function fixed_table(table){
  //获取table元素
  var table=document.getElementById(table);
  //获取table的父级元素
  var table_box=table.parentNode;
  //创建一个div,准备插入到table父级元素前
  var  table_header_fix= document.createElement("div");
  //给创建的div赋值id
  table_header_fix.setAttribute("id","table_header_fix");
  //将创建的div插入到table的父级元素前
  table_box.parentNode.insertBefore(table_header_fix,table_box);
  //获取table元素中thead的高度
  var table_height=table.children[0].offsetHeight;
  //复制一份table元素
  var clone_table=table.cloneNode(true);
  //为复制的table创建id名称，其实这个步骤没什么大用
  clone_table.setAttribute("id","cloneTable");
  //将复制的table元素插入到table_header_fix这个div中
  table_header_fix.appendChild(clone_table);
  //将获取的thead的高度赋值给table_header_fix，让他的可视区域只有这么高
  table_header_fix.style.height=table_height+'px';
  //隐藏掉超出的部分
  table_header_fix.style.overflow='hidden';
  //隐藏原有的table元素中thead
  table.children[0].style.display="none";
}</p></pre>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
  export default {
    name: 'tablefixed',
    data () {
      return {
        created: this.$route.query.created,
        title: this.$route.query.name
      }
    },
    mounted:function(){
      $("#table_box").niceScroll({cursorcolor:'#d1d1d1',cursorwidth:'4',horizrailenabled: false});
      this.$nextTick(function(){
        fixed_table("table_scroll");//固定表头
        function fixed_table(table){
          var table=document.getElementById(table);  //获取table元素
          var table_box=table.parentNode;            //获取table的父级元素
          var  table_header_fix= document.createElement("div");    //创建一个div,准备插入到table父级元素前
          table_header_fix.setAttribute("id","table_header_fix");  //给创建的div赋值id
          table_box.parentNode.insertBefore(table_header_fix,table_box);  //将创建的div插入到table的父级元素前
          var table_height=table.children[0].offsetHeight;      //获取table元素中thead的高度
          var clone_table=table.cloneNode(true);                 //复制一份table元素
          clone_table.setAttribute("id","cloneTable");          //为复制的table创建id名称，其实这个步骤没什么大用
          table_header_fix.appendChild(clone_table);             //将复制的table元素插入到table_header_fix这个div中
          table_header_fix.style.height=table_height+'px';     //将获取的thead的高度赋值给table_header_fix，让他的可视区域只有这么高
          table_header_fix.style.overflow='hidden';           //隐藏掉超出的部分
          table.children[0].style.display="none";            //隐藏原有的table元素中thead
        }
      })
    },
    methods: {
      toggle(){

      }
    }
  }
</script>
<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
  #table_box{
    height: 433px;
    overflow: hidden;
    /*border: 1px solid red;*/
    width: 100%;
  }

  .list_table{
    width:100%;
    border-spacing: 1;
    border-collapse: collapse;
    border:1px #ddd solid;
  }
  .list_table img{
    display: block;
    width: 50%;
    margin: 0 auto;
  }
  .list_table tr th,.list_table tr td{
    border:1px #ddd solid;
    text-align: center;
    background: #fff;
  }
  .list_table tr th{
    height: 23px;
    vertical-align: middle;
    background: #c3c3c3;
    color: #fff;
    /*display: none;*/
  }
  .list_table tr th:first-of-type{
    border-left: none;
  }
  .list_table tr th:last-of-type{
    border-right: none;
  }
  .list_table tr td{
    height: 36px;
    vertical-align: middle;
    /*display:none;*/
  }
  .list_table tr td.text-left{
    text-align: left;
  }
  .list_table tr td.text-right{
    text-align: right;
  }
  .list_table tr td:nth-child(1){
    width:40px;
  }
  .list_table tr td:nth-child(2){
    width:180px;
  }
  .list_table tr td:first-of-type{
    border-left: none;
  }
  .list_table tr td:last-of-type{
    border-right: none;
  }
  .list_table tr td:first-of-type img{
    padding: 0 5px;
  }
  .list_table tr td p{
    width: 175px;
    padding-left:5px;
    overflow:hidden;           /*  溢出隐藏 */
    text-overflow:ellipsis;    /* 文本溢出隐藏 */
    white-space:nowrap;     /* 文本不许换行 */
    margin:0;
  }
  .list_table tr td i{
    color: #0081d8;
    cursor: pointer;
  }
  .list_table tr td em{
    color: #17bb9c;
  }
  .list_table tr td span{
    color: #9559ad;
  }
</style>
